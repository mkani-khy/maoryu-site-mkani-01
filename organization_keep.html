<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ã¾ãŠã‚Šã‚…ã† ç·¨æˆä¿å­˜ï¼†é–²è¦§</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="image/organization.png"> 
    <style>
        /* New Game Site Theme for organization_keep.html (Character Pool Size FIX 2) */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a2e; /* Deep Blue/Purple */
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
        }
        h1 { 
            text-align: center; 
            color: #ffc107; /* Gold Header */
            border-bottom: 3px solid #00bcd4;
            padding-bottom: 10px;
            margin-bottom: 30px;
            text-shadow: 1px 1px 3px #000;
        }
        
        /* Panel/Card Style */
        #formationArea, #selectorArea, #teamManagement {
            background-color: #2c394b; /* Dark Card Background */
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            margin-bottom: 25px;
            border: 2px solid #00bcd4;
        }
        
        /* Button Styling */
        button {
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 5px;
            border: none;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .btn-primary { 
            background-color: #ffc107; 
            color: #1a1a2e; 
            border: 2px solid #ffeb3b;
        }
        .btn-primary:hover { background-color: #ffeb3b; }
        
        .btn-danger { background-color: #dc3545; color: white; }
        .btn-danger:hover { background-color: #c82333; }
        
        .btn-success { background-color: #28a745; color: white; }
        .btn-success:hover { background-color: #1e7e34; }
        
        /* Secondary buttons for utility/management */
        .btn-secondary { 
            background-color: #00bcd4; 
            color: #1a1a2e; 
            font-size: inherit;
        }
        .btn-secondary:hover { background-color: #76ff03; } /* Light Green Accent for secondary/utility */

        /* Tab Buttons */
        .tab-buttons {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 2px solid #00bcd4;
        }
        .tab-btn {
            background-color: #3e4a59;
            color: #e0e0e0;
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
            padding: 10px 20px;
            border-bottom: none;
            transition: background-color 0.2s, color 0.2s;
        }
        .tab-btn.active {
            background-color: #00bcd4;
            color: #1a1a2e;
            font-weight: bold;
            border-bottom: 3px solid #ffc107;
            margin-bottom: -2px; /* Pull it over the border */
        }

        /* Input Styling */
        input[type="text"] {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #555;
            background-color: #3e4a59;
            color: #e0e0e0;
        }

        /* === ç·¨æˆã‚¨ãƒªã‚¢ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (Formation Area) === */
        #formationArea h2 {
            color: #ffc107;
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 1px solid #3e4a59;
        }
        .formation-row {
            display: flex;
            justify-content: space-around;
            gap: 15px;
            padding: 15px 0;
        }
        .slot-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #1a1a2e; /* Slot grouping background */
            padding: 10px;
            border-radius: 8px;
            border: 1px dashed #00bcd4;
        }
        .slot-label {
            font-weight: bold;
            color: #ffc107;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        .drop-slot {
            /* ã‚¹ãƒ­ãƒƒãƒˆã‚µã‚¤ã‚ºã¯60pxã‚’ç¶­æŒï¼ˆé…ç½®ã•ã‚Œã¦ã„ã‚‹ã‚­ãƒ£ãƒ©ã®è¦–èªæ€§ã®ãŸã‚ï¼‰ */
            width: 60px;
            height: 60px;
            border: 3px dashed #76ff03; /* Light Green for slot border */
            background-color: #3e4a59;
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            margin: 5px 0;
            position: relative;
        }
        .drop-slot.hover { /* ãƒ‰ãƒ©ãƒƒã‚°ã‚ªãƒ¼ãƒãƒ¼æ™‚ã®å¼·èª¿ */
            background-color: #556070;
            border-color: #ffc107;
            box-shadow: 0 0 10px rgba(255, 193, 7, 0.8);
        }
        .drop-slot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border: 2px solid #ffc107; /* Gold border on dropped image */
            box-sizing: border-box;
        }
        .sub-slot {
            border-style: solid; /* Solid border for sub slot */
            border-color: #00bcd4;
        }

        /* === ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ—ãƒ¼ãƒ« (ç”»åƒã‚µã‚¤ã‚ºå†ä¿®æ­£: 50px -> 40px) === */
        #characterPool {
            border-top: 2px solid #00bcd4;
            padding-top: 15px;
        }
        .chara-list {
            display: grid;
            /* ç”»åƒã‚µã‚¤ã‚ºã‚’ã•ã‚‰ã«ç¸®å°: 50px -> 40px */
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); 
            gap: 5px; /* ã‚®ãƒ£ãƒƒãƒ—ã‚‚ã•ã‚‰ã«ç¸®å° */
            margin-top: 15px;
        }
        .chara-item {
            background-color: #1a1a2e;
            border-radius: 6px;
            overflow: hidden;
            cursor: grab;
            border: 1px solid #444;
            transition: transform 0.1s, border-color 0.2s;
            line-height: 0;
            /* ã‚¢ã‚¤ãƒ†ãƒ è‡ªä½“ã®å¹…ã‚‚èª¿æ•´ */
            width: 60px; 
            height: 60px;
        }
        .chara-item:hover {
            transform: scale(1.05);
            border-color: #ffc107;
            box-shadow: 0 0 5px rgba(255, 193, 7, 0.5);
        }
        .chara-item img {
            width: 100%;
            height: 100%;
            display: block;
            object-fit: cover; /* ç”»åƒãŒã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã« */
        }

        /* Saved Teams List */
        #savedTeamsList {
            list-style: none;
            padding: 0;
        }
        #savedTeamsList li {
            background-color: #3e4a59;
            margin-bottom: 8px;
            padding: 10px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid #ffc107;
            transition: background-color 0.2s;
        }
        #savedTeamsList li:hover {
            background-color: #4a5a6b;
        }
        #savedTeamsList li a {
            color: #e0e0e0;
            text-decoration: none;
            font-weight: bold;
        }
        #savedTeamsList li a:hover {
            color: #00bcd4;
        }
        /* --- ã‚¹ãƒãƒ›æœ€é©åŒ–: è¿½åŠ ãƒ»ä¿®æ­£ --- */
        @media (max-width: 600px) {
            body { padding: 10px; }
            
            /* ç·¨æˆã‚¨ãƒªã‚¢ã®æ¨ªä¸¦ã³ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã«ã™ã‚‹ã‹ã€ã‚µã‚¤ã‚ºã‚’ç¸®å° */
            .formation-row {
                gap: 5px;
                padding: 10px 0;
                overflow-x: auto; /* ç”»é¢ã‹ã‚‰ã¯ã¿å‡ºã™å ´åˆã¯æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
                justify-content: flex-start;
            }

            .slot-group {
                padding: 5px;
                min-width: 65px; /* ã‚¹ãƒ­ãƒƒãƒˆãŒæ½°ã‚Œãªã„ã‚ˆã†ã«ç¢ºä¿ */
            }

            .drop-slot {
                width: 50px; /* ã‚¹ãƒãƒ›ç”¨ã«å°‘ã—å°ã•ã */
                height: 50px;
            }

            /* ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ—ãƒ¼ãƒ«ã‚’æŠ¼ã—ã‚„ã™ãï¼ˆæŒ‡ã®ã‚µã‚¤ã‚ºã«åˆã‚ã›ã‚‹ï¼‰ */
            .chara-list {
                grid-template-columns: repeat(auto-fill, minmax(55px, 1fr));
                gap: 8px;
            }

            .chara-item {
                width: 55px;
                height: 55px;
            }

            /* ä¿å­˜ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’ä½¿ã„ã‚„ã™ã */
            #saveControls {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            #saveControls input { width: 100%; box-sizing: border-box; }
        }

        /* ã‚¿ãƒƒãƒ—ã—ãŸæ™‚ã«é¸æŠä¸­ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹æ¼”å‡º */
        .selected-chara {
            outline: 3px solid #ffc107;
            box-shadow: 0 0 15px #ffc107;
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <h1>ç·¨æˆä¿å­˜ï¼†é–²è¦§</h1>
    <p style="text-align: center;">
        <a href="index.html" style="font-size: 1.1em; color: #007bff; margin-right: 15px;">â† TOPã¸</a>
        <a href="saved_teams_view.html" style="font-size: 1.1em; color: #007bff;">ç·¨æˆè©³ç´°é–²è¦§ã¸ â†’</a>
    </p>

    <div id="saveControls">
        <input type="text" id="teamNameInput" placeholder="ãƒãƒ¼ãƒ åã‚’å…¥åŠ› (å¿…é ˆ)">
        <button class="btn-primary" onclick="saveTeam()">ç·¨æˆã‚’ä¿å­˜</button>
        <button class="btn-danger" onclick="clearFormation()">ç·¨æˆã‚¯ãƒªã‚¢</button>
    </div>

    <details open>
        <summary>ğŸ“‚ ä¿å­˜ã•ã‚ŒãŸãƒãƒ¼ãƒ ä¸€è¦§ (ã‚¯ãƒªãƒƒã‚¯ã§é–‹é–‰)</summary>
        <ul id="savedList">
            <li style="color:#777; padding:10px;">ä¿å­˜ã•ã‚ŒãŸãƒãƒ¼ãƒ ã¯ã‚ã‚Šã¾ã›ã‚“</li>
        </ul>
    </details>

    <div id="formationArea">
        <h3 style="margin-top:0; text-align:center;">ç¾åœ¨ã®ç·¨æˆ</h3>
        <div class="formation-row">
            <div class="slot-group">
                <span class="slot-label">åŠ è­·</span>
                <div class="drop-slot" id="slot-protect-main" data-type="protection" data-pos="main" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            </div>
            <div class="slot-group">
                <span class="slot-label">åŠ è­·(æ”¯)</span>
                <div class="drop-slot sub-slot" id="slot-protect-sub" data-type="protection" data-pos="sub" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            </div>
        </div>

        <hr>

        <div class="formation-row">
            <div class="slot-group">
                <span class="slot-label">å‰è¡›1</span>
                <div class="drop-slot" id="slot-battle-main-1" data-type="battle" data-pos="main-1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="drop-slot sub-slot" id="slot-battle-sub-1" data-type="battle" data-pos="sub-1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <span class="slot-label">æ”¯æ´1</span>
            </div>

            <div class="slot-group">
                <span class="slot-label">å‰è¡›2</span>
                <div class="drop-slot" id="slot-battle-main-2" data-type="battle" data-pos="main-2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="drop-slot sub-slot" id="slot-battle-sub-2" data-type="battle" data-pos="sub-2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <span class="slot-label">æ”¯æ´2</span>
            </div>

            <div class="slot-group">
                <span class="slot-label">å‰è¡›3</span>
                <div class="drop-slot" id="slot-battle-main-3" data-type="battle" data-pos="main-3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="drop-slot sub-slot" id="slot-battle-sub-3" data-type="battle" data-pos="sub-3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <span class="slot-label">æ”¯æ´3</span>
            </div>

            <div class="slot-group">
                <span class="slot-label">å¾Œè¡›1</span>
                <div class="drop-slot" id="slot-battle-main-4" data-type="battle" data-pos="main-4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="drop-slot sub-slot" id="slot-battle-sub-4" data-type="battle" data-pos="sub-4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <span class="slot-label">æ”¯æ´4</span>
            </div>

            <div class="slot-group">
                <span class="slot-label">å¾Œè¡›2</span>
                <div class="drop-slot" id="slot-battle-main-5" data-type="battle" data-pos="main-5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="drop-slot sub-slot" id="slot-battle-sub-5" data-type="battle" data-pos="sub-5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <span class="slot-label">æ”¯æ´5</span>
            </div>
        </div>
    </div>

    <div id="selectorArea">
        <div class="tab-buttons">
            <button class="tab-btn active" onclick="switchTab('battle')">âš”ï¸ æˆ¦é—˜ã‚­ãƒ£ãƒ©</button>
            <button class="tab-btn" onclick="switchTab('protection')">âœ¨ åŠ è­·ã‚­ãƒ£ãƒ©</button>
        </div>
        <input type="text" id="charSearch" placeholder="åå‰ã§æ¤œç´¢..." oninput="filterPool()" style="width:95%; margin-bottom:10px; padding:5px;">
        <div id="characterPool">
            </div>
    </div>

    <script src="script_organization.js"></script>
</body>
</html>